## 从输入 URL 到页面展示

### 流程示意图

![流程图](./3.1.png)

### 流程解析

#### 1、用户输入 URL

    首先，地址栏会判断输入的关键字是搜索内容还是请求的URL。如果是搜索内容，地址栏会根据搜索引擎来合成新的带搜索关键字的URL，如果判断输入内容符合URL规则，那么地址栏会根据规则把这段内容加上协议，合成完整的URL。

    当用户输入关键字并键入回车之后，这意味着当前页面即将要被替换成新的页面，不过在这个流程继续之前，浏览器还给了当前页面一次执行beforeUnload事件的机会，beforeUnload事件允许页面在退出之前执行一些数据清理操作，还可以询问用户是否要离开当前页面，比如当前页面可能有未提交完成的表单等情况。因此用户可以通过beforeUnload事件来取消导航，让浏览器不再执行任何后续工作。

#### 2、URL 请求过程

     进入页面资源请求过程，首先浏览器进程会通过进程通讯把URL请求发送至网络进程。 网络进程收到URL请求后，
     首先，网络进程会查找本地缓存，如果有缓存资源，那么直接返回资源给浏览器进程；如果在缓存中没有查找到资源，那么直接进入网络请求流程。

#### 3、准备渲染过程

#### 4、提交文档

     所谓提交文档，就是指浏览器进程将网络进程收到的HTML数据提交给渲染进程，具体流程是这样的：
      - 首先当浏览器进程收到网络进程的响应头数据之后，便向渲染进程发起 “提交文档” 的消息；
      - 渲染进程接收到 “提交文档” 的消息后，会和网络进程建立传输数据的管道；
      - 等文档数据传输完成之后，渲染进程会返回 “确认提交” 的消息给浏览器进程；
      - 浏览器进程在收到 “确认提交” 的消息后，会更新浏览器界面状态，包括了安全状态、地址栏的URL、前进后退的历史状态，并更新Web页面。（当前状态只更新了导航栏信息，清空页面。实际界面的展示在渲染阶段）

#### 5、渲染阶段

     一旦文档被提交，渲染进程便开始页面解析和加载子资源了，一旦页面渲染完成，渲染进程就会发送一个消息给浏览器进程，浏览器接受消息后，会停止标签图标上的加载动画。

####
