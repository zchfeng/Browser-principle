## TCP 协议：如何保证页面文件能被完整送达到浏览器

### FP(Frist Paint)：指从页面加载到首次开始绘制的时长。

### 一个数据包的“旅程”

- 1、IP：把数据包送达到目的主机。
  - 计算机的地址就称为 IP 地址。
- 2、UDP：把数据包送达应用程序。
  - IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。
- 3、TCP：把数据完整的送达应用程序。
  - TCP 是一种面向连接的、可靠的、基于字节流的传输通讯协议。相对 UDP，TCP 有下面的特点：对于数据包丢失的情况。TCP 提供重传机制；TCP 引入了数码包排序机制，用来保证把乱序的数据包组合成一个完整的文件。

### TCP 连接的生命周期：建立连接、传输数据、断开连接

- 首先，通过三次握手建立连接阶段。
  三次握手，是指建立一个 TCP 连接时，客户端和服务器总共要发送三个数据包以确认连接的建立。第一次握手，客服端向服务器发送，告知服务器将有一个请求，第二次，服务器收到客户端的请求后，告知客户端将要发送响应，第三次，客户端收到服务器将要响应，发送允许响应信息。

- 其次，传输数据阶段。
  在该阶段，接收端需要对每个数据包进行确认操作。如果传输的是大文件，会拆分成多个小数据。这些数据包到接收端，接收端会按照 TCP 头中的顺序进行排序，保证形成完整数据。如果一定时间内没有收到数据包，会触发发送端的重传机制。等到完整数据才会开始渲染。

- 最后，断开连接
  四次挥手，保证双方都能断开连接。
